2. 三种交换方式
- 电路交换:要求任一2台之间可通信。
![avator](./images/网络通信/%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2.png)
- **分组交换(package switching)**：路由器是实现分组交换的关键构件，其任务是转发收到的分组，这是网络核心部分最重要的功能。

分组交换则采用存储转发技术。如下图所示，把1个报文(要发送的整块数据，message)划分为几个分组后再进行传送。在发送前，先把较长的报文划分成一个个更小的等长数据段，例如，每个数据段为1024bit，在每个数据段前加上一些必要的控制信息组成的首部(header)后，就构成了1个分组(package),又称为“包”。

- 报文交换

### 计算机网络分类
#### 作用范围
1. 广域网：几十-几千公里，远程网。(long haul network).连接广域网各节点的交换机的链路一般都是高速链路，具有较大的通信容量。
2. 城域网(man,metroplitan area network)：作用范围是一个城市，5-50km，目前多采用以太网技术。
3. 局域网(lan,local area network)
4. 个人区域网（person area network，apn)，

#### 线路结构分类
1. 星型拓扑结构
排查问题方便
2. 总线型 
所有设备都直接与总线相连，采用多介质一般也是同轴电缆（包括粗缆和细缆），现在也有采用光缆作为总线传输的。
各工作站地位平等，无中心节点控制。
- 结构简单：能够接在总线上的计算机数量有限，但可以搭线，相对于星型来说可拓展性强
- 走线量小
- 诊断困难：

3. 环形拓扑结构：
这种结构的网络形式主要应用于令牌网中，这种网络结构中各设备是直接通过电缆来串接的，最后形成一个闭环，整个网络中发送的信息都在这个环中传递，通常把这类网络称为“令牌环网”。
什么是令牌环：
- 其中媒体介入

4. 网状拓扑结构
![avator](./images/网络通信/%E7%BD%91%E7%8A%B6%E6%8B%93%E6%89%91%E7%BB%93%E6%9E%84.png)
各节点通过传输线互联连接起来，并且每个节点至少与其他2个节点相连，具有较高的可靠性，但其结构复杂，实现起来费用较高，不易管理和维护，不常用于局域网。
优点：
- 网络可靠性高
- 网络可组成多种形状，采用多种通信信道，多种传输速率
- 可选择最佳路径，网络时延小
缺点：
- 控制复杂，软件复杂
- 线路费用高，不易扩充
- 在以太网中，如果设置不当，会造成广播风暴，严重时可以使网络瘫痪。

## 网络性能指标
速率、带宽、吞吐量、时延、 往返时间、利用率、吞包率

### 速率
计算机发送的信号量都是二进制
1kb =   2^10B
1M  =   2^20B
1GB =   2^30B

速率：链接在网络上的主机在数字信道上传送比特数据的速率，也称为比特率或数据率。
- bit/s == bps
- kb/s  == 10^3 b/s (bps)
- Mb/s  == 10^3 * 10^3 b/s = 10^6 bps
以此内推。

### 带宽：单位时间内，网络中信道最高能传送数据的能力，**最高的单位时间的数据量**
单位：b/s（kbs,Mb/s,Gb/s,Tb/s)
宽带的带宽是100M，出口网速最高是100Mb/s

### 吞吐量：单位时间内，通过通过某个网络(或信道，接口的数据量)。 **实际的数据量**

### 时延
总时延= 发送时延+传输时延+处理时延（经常忽略）

传输时延= 传输长度/信道传输速率
自由空间： 3*10^8 m/s
铜线： 2.3 * 10^8 m/s
光纤的传输速率： 2.0 * 10^8 m/s


### 往返时间(rtt)
RTT(Round-Trip Time):表示从发送端到传输媒介开始，到发送端来自接收端的确认总共经历的时间，不包含发送时延。
RTT由3个部分决定
- 链路传播时间
- 末端系统的处理时间
- 路由器的缓存中的排队和处理时间


前2个作为TCP连接相对固定，路由器的缓存中的排队时间会随着网络堵塞成都变化而变化，所以RTT再一定程度上反应了网络拥塞程度的变化。

发送时间= 数据长度/发送速率= 100*10^20*8/(100*10^6)  
有效数据率=数据长度/(发送时间+RTT)

有效数据率 跟 RTT 成反比

### 利用率
1. 信道利用率：用来表示信道有百分之几的时间是被利用的（有数据通过）

2. 网络利用率：全网络的信道利用率的加权平均

根据排队论，当某信道的利用率增大时，该信道引起的时延也会迅速增加。  
如果令Do表示网络空闲时的时延，D表示网络当前时延，那么在适当的假定条件下，可以用下面的简单公式来表示D、Do和利用率U之间的关系为

![avator](./images/网络通信/%E7%BD%91%E7%BB%9C%E6%97%B6%E5%BB%B6%E5%92%8C%E4%BF%A1%E9%81%93%E5%88%A9%E7%94%A8%E7%8E%87%E7%9A%84%E5%85%B3%E7%B3%BB.png)

### 丢包率
丢包率即分组丢失率，是指在一定时间范围内，传输过程中丢失的分组数量和总分组数量的比率。
丢包率是网络运维人员非常关心的指标。
分组丢失主要有2种情况：
- 误码
- 分组到达一台队列已满的分组交换时被丢弃，在通信量较大时可能造成网络拥塞。因此反应了网络拥塞度：无拥塞时0；轻度1-4%；重度5-15%

## 计算机网络体系结构
### 常用的
1. osi 模型：开发系统互联参考模型。7层
- 物理层
- 数据链路层
- 网络层
- 运输层
- 会话层
- 表示层
- 应用层

![avator](./images/网络通信/OSI%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84.png)

2. 具有5层协议的体系结构：
2.1 TCP/IP：是一个4层的体系结构：应用层、会话层、网际层(强调这一层是为了解决不同网络的互联问题)和网络结构层。

![avator](./images/网络通信/OSI_TCP%3AIP_5%E5%B1%82%E5%8D%8F%E8%AE%AE%E5%AF%B9%E6%AF%94%E5%9B%BE.png)
- 网络接口层：
```
 1. 链路层：2台主机之间的传输，总是在一段段链路上传输的，这就需要专门的链路传输协议。在相邻2个节点之间传输数据时，数据链路将网络层交下来的IP数据报，组装成帧(frame)，在2个相邻节点路上传送帧，每一帧包括数据和必要的控制信息(如同步信息、地址信息、差错控制等)。
 2. 物理层：(physical layer)利用传输介质为数据链路层提供物理连接，实现比特流的透明传输。
 物理层所传输数据的单位是比特。
```
- 网际IP层（网络层，network layer）,主要作用是实现2个网络之间的数据透明传送，具体包括路由选择，拥塞控制和网际互联等。在发送数据时，把运输层产生的报文或用户数据报封装成分组或包进行传送。在TCP/IP体系中，由于网络层使用IP协议，因此分组也叫做IP数据报，简称数据报。数据在经过网络层时，会加上IP的头部。
- 运输层(transport layer, TCP或UDP)，运输层的任务是负责向2台主机中进程之间的通信提供通用的数据传输服务。运输层主要的协议有TCP和UDP。
- 应用层(application layer,各种应用协议TELNET，FTP，SMTP等)：应用层协议定义的是由应用进程间通信和规则，例如域名系统DNS，支持万维网应用等HTTP协议，支持电子邮件的SMTP协议等。我们把应用协议交互的数据单元称为报文(message)。